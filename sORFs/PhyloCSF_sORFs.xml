<tool id="PhyloCSF_sORFs" name="Step 4b: sORF coding/non-coding analysis" version="1.0">
	
    <description>Analyses the coding potential of sORF sequences with PhyloCSF</description>
    
    <command interpreter="perl">
        #if $tisids.assembl == "all"
        ./Phylocsf_sORFs.pl --sqlite_db "${sqlite_db}" --tis_ids "${tisids.all}" --cores "${cores}" --out_sqlite "${out_sqlite}"
        #else if $tisids.assembl == "specific"
        ./Phylocsf_sORFs.pl --sqlite_db "${sqlite_db}" --tis_ids "${tisids.specific}" --cores "${cores}" --out_sqlite "${out_sqlite}"
        #end if
    </command>
    <inputs>
        <param name="sqlite_db" type="data" format="sqlitedb" size="30" label="Sqlite DB with information of steps 1,2,3 and 4" help="The sqlite results database should contain output from the mapping (step 1), TIS calling (step 2), sORF translation assembly (step 3) and PhyloCSF input data (step 4a)"/>
        <param name="cores" type="integer" size="5" value="8" label="enter the number of cores to run the transcriptome mapping" />
        <conditional name="tisids">
            <param name="assembl" type="select" label="Select TIS ids for PhyloCSF input">
                <option value="all">Perform assembly for all TIS-analysis ids</option>
                <option value="specific">Perform assembly for specific TIS-analysis ids</option>
            </param>
            <when value="specific">
                <param name="overview_in" type="data" size="30" format="tis" label="TIS overview file (Sqlite DB specific, see data number)" help="if your history does not contain the correct TIS overview file, first run the TIS overview tool selected Sqlite DB, see above."/>
                <param name="specific" type="select" display="checkboxes" label="TIS ids - Pick IDs for PhyloCSF input" multiple="true">
                    <options>
                        <filter type="data_meta" ref="overview_in" key="args" />
                    </options>
                </param>
            </when>
            <when value="all">
                <param name="all" type="hidden" value ="all" />
            </when>
        </conditional>
         </inputs>
    <outputs>
        <data format="sqlitedb" name="out_sqlite" label="SQLite database with mapping, TIS (and SNP) calling, sORF assembly, PhyloCSF MAF input and sORF PhyloCSF scores (step 1-2(-4)-5-6a/b)"/>
    </outputs>
    
    <help>
        
.. class:: infomark
        
**What it does**

This tool analyses the sORF transcripts for their coding/non-coding potential with the PhyloCSF tool.

-----

.. class:: infomark

**Input**

An sqlite database holding experimental data from previous steps: i.e. 1.mapping, 2.TIS calling, 3. sORF Assembly and 4a. PhyloCSF input

-----

.. class:: infomark

**Output**

An sqlite database holding all experimental data resulting from the 1.mapping, 2.TIS calling, 3. sORF translation product assembly, 4a. sORF specific MAF sequences and 4b. sORF PhyloCSF scores. After PhyloCSF input step the TIS_id_sORFs_transcripts table will have an extra column: "PhyloCSF" containing the sORF PhyloCSF score.

    </help>

</tool>